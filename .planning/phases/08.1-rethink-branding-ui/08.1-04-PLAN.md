---
phase: 08.1-rethink-branding-ui
plan: 04
type: execute
wave: 3
depends_on: ["08.1-01", "08.1-02"]
files_modified:
  - sidekiq-webapp/src/components/chat/chat-interface.tsx
  - sidekiq-webapp/src/components/chat/chat-input.tsx
  - sidekiq-webapp/src/components/chat/chat-header.tsx
  - sidekiq-webapp/src/components/chat/empty-state.tsx
  - sidekiq-webapp/src/components/chat/message-item.tsx
  - sidekiq-webapp/src/components/chat/message-content.tsx
  - sidekiq-webapp/src/components/chat/typing-indicator.tsx
  - sidekiq-webapp/src/components/chat/scroll-to-bottom.tsx
  - sidekiq-webapp/src/components/chat/message-actions.tsx
  - sidekiq-webapp/src/components/chat/model-switch-hint.tsx
  - sidekiq-webapp/src/components/theme/theme-toggle.tsx
autonomous: true

must_haves:
  truths:
    - "Chat input has editor-like styling with visible border and defined toolbar area"
    - "Chat header is a defined bar with bottom border separating it from content"
    - "Empty state uses muted icon in circular bg-muted background, no glassmorphism"
    - "Message content code blocks are visually distinct with different background and border"
    - "Typing indicator uses semantic tokens, no hardcoded zinc colors"
    - "Theme toggle has no glass-subtle class"
  artifacts:
    - path: "sidekiq-webapp/src/components/chat/chat-input.tsx"
      provides: "Editor-like chat input with border and toolbar"
      contains: "border-border"
    - path: "sidekiq-webapp/src/components/chat/chat-header.tsx"
      provides: "Chat header bar with bottom border"
      contains: "border-b"
    - path: "sidekiq-webapp/src/components/chat/typing-indicator.tsx"
      provides: "Typing indicator with semantic tokens"
  key_links:
    - from: "sidekiq-webapp/src/components/chat/chat-input.tsx"
      to: "sidekiq-webapp/src/styles/globals.css"
      via: "Semantic token classes (border-border, bg-card)"
      pattern: "border-border"
---

<objective>
Restyle all chat components to match the Linear-inspired aesthetic: editor-like input, defined header bar, clean empty state, distinct code blocks, and consistent semantic token usage.

Purpose: The chat interface is the primary user-facing surface. It must feel premium, clean, and professional — editor-like input, clear hierarchy, and no glassmorphism remnants.
Output: 11 updated chat and theme component files.
</objective>

<execution_context>
@/Users/carlocasorzo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/carlocasorzo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/08.1-rethink-branding-ui/08.1-RESEARCH.md
@.planning/phases/08.1-rethink-branding-ui/08.1-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restyle chat input, header, and empty state</name>
  <files>
    sidekiq-webapp/src/components/chat/chat-interface.tsx
    sidekiq-webapp/src/components/chat/chat-input.tsx
    sidekiq-webapp/src/components/chat/chat-header.tsx
    sidekiq-webapp/src/components/chat/empty-state.tsx
    sidekiq-webapp/src/components/chat/model-switch-hint.tsx
    sidekiq-webapp/src/components/theme/theme-toggle.tsx
  </files>
  <action>
  Read each file and apply these specific changes:

  **chat-interface.tsx:**
  - Remove `glass` class references
  - Remove gradient backgrounds (`from-zinc-*`, `to-zinc-*`). Replace with solid `bg-background`.
  - Replace any `bg-zinc-*` with semantic tokens
  - Ensure the overall chat area uses `bg-background`

  **chat-input.tsx:**
  - Remove `glass-input` and `glass` class references
  - Redesign as editor-like input following the research pattern:
    - Outer wrapper: `border-t border-border bg-background px-4 py-4`
    - Inner container: `rounded-md border border-border bg-card`
    - If there's a toolbar area (model picker, Sidekiq badge), ensure it's separated: `border-b border-border px-3 py-1.5`
    - Textarea: `border-0 bg-transparent focus-visible:ring-0` (no border inside the card)
    - Action buttons area: `flex items-center justify-end px-3 py-1.5`
  - Replace all hardcoded zinc colors with semantic tokens

  **chat-header.tsx:**
  - Style as a defined bar: ensure it has `border-b border-border` for clear separation from chat content
  - Use `bg-background` or `bg-card` for the header background
  - Remove any glass or backdrop-blur classes
  - Replace hardcoded zinc colors with semantic tokens
  - Ensure the header has appropriate padding: `px-4 py-3` or similar

  **empty-state.tsx:**
  - Remove `glass-subtle` class references
  - Replace with clean centered layout:
    - Icon area: muted icon in `bg-muted rounded-full p-4`
    - Heading: `text-foreground font-semibold`
    - Description: `text-muted-foreground`
    - CTA button: primary button style (blue)
  - Replace any hardcoded zinc colors

  **model-switch-hint.tsx:**
  - Replace any hardcoded zinc colors with semantic tokens
  - Use `text-muted-foreground` for hint text
  - Use `bg-muted` or `bg-accent` for hint background

  **theme-toggle.tsx:**
  - Remove `glass-subtle` class reference
  - Replace with `border border-border bg-card` or simple ghost button styling
  - Replace any hardcoded zinc colors
  </action>
  <verify>
  Run: `grep -r "zinc-\|glass\|backdrop-blur" sidekiq-webapp/src/components/chat/chat-interface.tsx sidekiq-webapp/src/components/chat/chat-input.tsx sidekiq-webapp/src/components/chat/chat-header.tsx sidekiq-webapp/src/components/chat/empty-state.tsx sidekiq-webapp/src/components/chat/model-switch-hint.tsx sidekiq-webapp/src/components/theme/theme-toggle.tsx` — should return no matches.
  </verify>
  <done>
  Chat input has editor-like styling with border and toolbar separation. Chat header is a defined bar with border-b. Empty state is clean with muted icon and no glass. Theme toggle uses no glass classes. All use semantic tokens.
  </done>
</task>

<task type="auto">
  <name>Task 2: Restyle message components and typing indicator</name>
  <files>
    sidekiq-webapp/src/components/chat/message-item.tsx
    sidekiq-webapp/src/components/chat/message-content.tsx
    sidekiq-webapp/src/components/chat/typing-indicator.tsx
    sidekiq-webapp/src/components/chat/scroll-to-bottom.tsx
    sidekiq-webapp/src/components/chat/message-actions.tsx
  </files>
  <action>
  Read each file and apply these changes:

  **message-item.tsx:**
  - Replace hardcoded zinc colors with semantic tokens
  - User messages: can have subtle `bg-muted/50` tint or no background (minimal lines style)
  - AI messages: clean, no special background (content-focused)
  - Ensure `text-foreground` for message text
  - Replace any gradient or glass classes

  **message-content.tsx:**
  - Code blocks must be visually distinct: different background (`bg-muted` or `bg-card`), visible border (`border border-border`), standing out from message text
  - If using prose overrides, ensure the prose plugin styles work with the new token system
  - Update any prose color overrides: `prose-invert` in dark mode, ensure headings/links/code use the right tokens
  - Replace hardcoded zinc colors in prose overrides

  **typing-indicator.tsx:**
  - This file has extensive hardcoded zinc colors (research identified it as a problem area)
  - Replace ALL `bg-zinc-*` with semantic tokens: `bg-muted` for dot backgrounds, `bg-card` for container
  - Replace ALL `text-zinc-*` with `text-muted-foreground`
  - Replace ALL `border-zinc-*` with `border-border`
  - Ensure the animation dots use `bg-primary` or `bg-muted-foreground` for visibility

  **scroll-to-bottom.tsx:**
  - Replace glass-subtle or any glass classes with `border border-border bg-card shadow-md hover:bg-accent`
  - Replace hardcoded zinc colors with semantic tokens

  **message-actions.tsx:**
  - Replace hardcoded zinc colors with semantic tokens
  - Action buttons: ghost style with `hover:bg-accent`
  - Copy, edit, regenerate icons: `text-muted-foreground hover:text-foreground`
  </action>
  <verify>
  Run: `grep -r "zinc-\|glass\|backdrop-blur" sidekiq-webapp/src/components/chat/message-item.tsx sidekiq-webapp/src/components/chat/message-content.tsx sidekiq-webapp/src/components/chat/typing-indicator.tsx sidekiq-webapp/src/components/chat/scroll-to-bottom.tsx sidekiq-webapp/src/components/chat/message-actions.tsx` — should return no matches.
  Run: `cd sidekiq-webapp && pnpm tsc --noEmit 2>&1 | head -20` — no TypeScript errors.
  </verify>
  <done>
  Message items use semantic tokens. Code blocks in message-content are visually distinct. Typing indicator has zero hardcoded zinc colors. Scroll-to-bottom uses card styling. Message actions use ghost button styling. All semantic tokens.
  </done>
</task>

</tasks>

<verification>
1. `grep -r "zinc-\|glass\|backdrop-blur" sidekiq-webapp/src/components/chat/ sidekiq-webapp/src/components/theme/theme-toggle.tsx` returns no matches
2. `grep "border-b" sidekiq-webapp/src/components/chat/chat-header.tsx` finds the header border
3. `grep "border-border" sidekiq-webapp/src/components/chat/chat-input.tsx` finds editor-like styling
4. `cd sidekiq-webapp && pnpm tsc --noEmit` passes
</verification>

<success_criteria>
- Chat input is editor-like with visible border and toolbar separation
- Chat header has border-b for clear separation
- Empty state is clean with no glassmorphism
- Code blocks are visually distinct with border and different background
- Typing indicator uses only semantic tokens
- All 11 files have zero hardcoded zinc/glass/backdrop-blur
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/08.1-rethink-branding-ui/08.1-04-SUMMARY.md`
</output>
