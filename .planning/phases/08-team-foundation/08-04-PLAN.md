---
phase: 08-team-foundation
plan: 04
type: execute
wave: 3
depends_on: ["08-02", "08-03"]
files_modified:
  - sidekiq-webapp/src/components/team/team-member-row.tsx
  - sidekiq-webapp/src/components/team/team-member-list.tsx
  - sidekiq-webapp/src/components/team/team-invites-list.tsx
  - sidekiq-webapp/src/components/team/team-settings-section.tsx
autonomous: true

must_haves:
  truths:
    - "Member list shows avatar, name, email, role, and actions"
    - "Role icons display correctly (crown for owner, shield for admin)"
    - "Member actions respect permission rules"
    - "Pending invites display with revoke/resend options"
    - "Member count displays as X/Y format"
  artifacts:
    - path: "sidekiq-webapp/src/components/team/team-member-list.tsx"
      provides: "Member list with search and role display"
      exports: ["TeamMemberList"]
    - path: "sidekiq-webapp/src/components/team/team-settings-section.tsx"
      provides: "Team settings wrapper for settings page"
      exports: ["TeamSettingsSection"]
  key_links:
    - from: "sidekiq-webapp/src/components/team/team-member-row.tsx"
      to: "sidekiq-webapp/src/lib/team-permissions.ts"
      via: "permission checks for actions"
      pattern: "canRemoveMember|canChangeRole"
    - from: "sidekiq-webapp/src/components/team/team-member-list.tsx"
      to: "sidekiq-webapp/src/hooks/use-member-search.ts"
      via: "member filtering"
      pattern: "useMemberSearch"
---

<objective>
Create the team member management UI components for the settings page.

Purpose: Build the member list with role display, action menus, and invite management that will be displayed in team settings. These components compose the dialogs and hooks from Plan 03.

Output: Member row component with actions, member list with search, invites list, and the overall team settings section component.
</objective>

<execution_context>
@/Users/carlocasorzo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/carlocasorzo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-team-foundation/08-CONTEXT.md
@.planning/phases/08-team-foundation/08-RESEARCH.md
@.planning/phases/08-team-foundation/08-02-SUMMARY.md
@.planning/phases/08-team-foundation/08-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create team member row component</name>
  <files>sidekiq-webapp/src/components/team/team-member-row.tsx</files>
  <action>
Create the member row component with role display and action menu:

```typescript
"use client";

import { useState } from "react";
import { Crown, Shield, MoreHorizontal, UserMinus, ArrowUpDown, LogOut } from "lucide-react";

import { Avatar, AvatarFallback, AvatarImage } from "@sidekiq/components/ui/avatar";
import { Button } from "@sidekiq/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@sidekiq/components/ui/dropdown-menu";
import { Badge } from "@sidekiq/components/ui/badge";
import {
  canRemoveMember,
  canChangeRole,
  canLeaveTeam,
  getRoleLabel,
  type TeamRole,
} from "@sidekiq/lib/team-permissions";
import type { TeamMember } from "@sidekiq/hooks/use-member-search";

interface TeamMemberRowProps {
  member: TeamMember;
  currentUserRole: TeamRole;
  currentUserId: string;
  onRemove: (userId: string) => void;
  onChangeRole: (userId: string, newRole: "admin" | "member") => void;
  onLeave: () => void;
  highlightMatch?: (text: string) => React.ReactNode;
}

/**
 * Single row in the team member list.
 * Displays user info, role badge, and action menu based on permissions.
 *
 * Per CONTEXT.md:
 * - Crown icon for owner
 * - Shield icon for admin
 * - Actions via three-dot dropdown menu
 */
export function TeamMemberRow({
  member,
  currentUserRole,
  currentUserId,
  onRemove,
  onChangeRole,
  onLeave,
  highlightMatch = (text) => text,
}: TeamMemberRowProps) {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const isSelf = member.userId === currentUserId;
  const canRemove = canRemoveMember(currentUserRole, member.role, isSelf);
  const canChange = canChangeRole(currentUserRole, member.role, member.role === "admin" ? "member" : "admin");
  const canSelfLeave = isSelf && canLeaveTeam(currentUserRole);

  const hasActions = canRemove || canChange || canSelfLeave;

  // Get initials for avatar fallback
  const getInitials = (name: string) => {
    const words = name.trim().split(/\s+/);
    if (words.length >= 2) {
      return (words[0]![0] + words[1]![0]).toUpperCase();
    }
    return name.slice(0, 2).toUpperCase();
  };

  const RoleIcon = member.role === "owner" ? Crown : member.role === "admin" ? Shield : null;

  return (
    <div className="flex items-center justify-between gap-4 rounded-lg border p-3 transition-colors hover:bg-muted/50">
      <div className="flex items-center gap-3 min-w-0">
        <Avatar className="h-10 w-10 shrink-0">
          <AvatarImage src={member.user.image ?? undefined} alt={member.user.name} />
          <AvatarFallback>{getInitials(member.user.name)}</AvatarFallback>
        </Avatar>

        <div className="min-w-0">
          <div className="flex items-center gap-2">
            <span className="font-medium truncate">
              {highlightMatch(member.user.name)}
            </span>
            {isSelf && (
              <Badge variant="secondary" className="text-xs">
                You
              </Badge>
            )}
          </div>
          <p className="text-sm text-muted-foreground truncate">
            {highlightMatch(member.user.email)}
          </p>
        </div>
      </div>

      <div className="flex items-center gap-2 shrink-0">
        <div className="flex items-center gap-1.5">
          {RoleIcon && (
            <RoleIcon
              className={`h-4 w-4 ${
                member.role === "owner"
                  ? "text-amber-500"
                  : "text-blue-500"
              }`}
            />
          )}
          <span className="text-sm text-muted-foreground">
            {getRoleLabel(member.role)}
          </span>
        </div>

        {hasActions && (
          <DropdownMenu open={isMenuOpen} onOpenChange={setIsMenuOpen}>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" size="icon" className="h-8 w-8">
                <MoreHorizontal className="h-4 w-4" />
                <span className="sr-only">Member actions</span>
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              {canChange && (
                <DropdownMenuItem
                  onClick={() => {
                    onChangeRole(
                      member.userId,
                      member.role === "admin" ? "member" : "admin"
                    );
                    setIsMenuOpen(false);
                  }}
                >
                  <ArrowUpDown className="mr-2 h-4 w-4" />
                  {member.role === "admin" ? "Demote to Member" : "Promote to Admin"}
                </DropdownMenuItem>
              )}
              {canRemove && (
                <>
                  {canChange && <DropdownMenuSeparator />}
                  <DropdownMenuItem
                    onClick={() => {
                      onRemove(member.userId);
                      setIsMenuOpen(false);
                    }}
                    className="text-destructive focus:text-destructive"
                  >
                    <UserMinus className="mr-2 h-4 w-4" />
                    Remove from Team
                  </DropdownMenuItem>
                </>
              )}
              {canSelfLeave && (
                <>
                  {(canChange || canRemove) && <DropdownMenuSeparator />}
                  <DropdownMenuItem
                    onClick={() => {
                      onLeave();
                      setIsMenuOpen(false);
                    }}
                    className="text-destructive focus:text-destructive"
                  >
                    <LogOut className="mr-2 h-4 w-4" />
                    Leave Team
                  </DropdownMenuItem>
                </>
              )}
            </DropdownMenuContent>
          </DropdownMenu>
        )}
      </div>
    </div>
  );
}
```
  </action>
  <verify>Run `pnpm typecheck` to verify component compiles</verify>
  <done>
- Member row displays avatar, name, email, role
- Role icons (crown/shield) shown correctly
- Action menu respects permission rules
- Self-leave option shown for non-owners
  </done>
</task>

<task type="auto">
  <name>Task 2: Create team member list and invites list components</name>
  <files>
    sidekiq-webapp/src/components/team/team-member-list.tsx
    sidekiq-webapp/src/components/team/team-invites-list.tsx
  </files>
  <action>
Create two list components:

**team-member-list.tsx:**
```typescript
"use client";

import { useState } from "react";
import { Search, UserPlus } from "lucide-react";

import { Input } from "@sidekiq/components/ui/input";
import { Button } from "@sidekiq/components/ui/button";
import { TeamMemberRow } from "@sidekiq/components/team/team-member-row";
import { RemoveMemberDialog } from "@sidekiq/components/team/remove-member-dialog";
import { InviteMemberDialog } from "@sidekiq/components/team/invite-member-dialog";
import { useMemberSearch, type TeamMember } from "@sidekiq/hooks/use-member-search";
import { canInvite, type TeamRole } from "@sidekiq/lib/team-permissions";
import { api } from "@sidekiq/trpc/react";

interface TeamMemberListProps {
  teamId: string;
  teamName: string;
  members: TeamMember[];
  memberLimit: number;
  currentUserRole: TeamRole;
  currentUserId: string;
  onMemberRemoved?: () => void;
  onRoleChanged?: () => void;
  onLeft?: () => void;
}

/**
 * Team member list with search, invite button, and member rows.
 * Displays member count as "X/Y members" per CONTEXT.md.
 */
export function TeamMemberList({
  teamId,
  teamName,
  members,
  memberLimit,
  currentUserRole,
  currentUserId,
  onMemberRemoved,
  onRoleChanged,
  onLeft,
}: TeamMemberListProps) {
  const { query, setQuery, results, highlightMatch } = useMemberSearch(members);
  const [inviteDialogOpen, setInviteDialogOpen] = useState(false);
  const [removeDialogOpen, setRemoveDialogOpen] = useState(false);
  const [memberToRemove, setMemberToRemove] = useState<TeamMember | null>(null);

  const utils = api.useUtils();

  const inviteMutation = api.team.invite.useMutation({
    onSuccess: () => {
      utils.team.listInvites.invalidate({ id: teamId });
    },
  });

  const removeMutation = api.team.removeMember.useMutation({
    onSuccess: () => {
      utils.team.listMembers.invalidate({ id: teamId });
      utils.team.getById.invalidate({ id: teamId });
      setRemoveDialogOpen(false);
      setMemberToRemove(null);
      onMemberRemoved?.();
    },
  });

  const changeRoleMutation = api.team.changeRole.useMutation({
    onSuccess: () => {
      utils.team.listMembers.invalidate({ id: teamId });
      onRoleChanged?.();
    },
  });

  const leaveMutation = api.team.leave.useMutation({
    onSuccess: () => {
      utils.team.list.invalidate();
      onLeft?.();
    },
  });

  const handleInvite = async (email: string, sendEmail: boolean) => {
    return inviteMutation.mutateAsync({ teamId, email, sendEmail });
  };

  const handleRemoveClick = (userId: string) => {
    const member = members.find((m) => m.userId === userId);
    if (member) {
      setMemberToRemove(member);
      setRemoveDialogOpen(true);
    }
  };

  const handleRemoveConfirm = () => {
    if (memberToRemove) {
      removeMutation.mutate({ teamId, userId: memberToRemove.userId });
    }
  };

  const handleChangeRole = (userId: string, newRole: "admin" | "member") => {
    changeRoleMutation.mutate({ teamId, userId, newRole });
  };

  const handleLeave = () => {
    leaveMutation.mutate({ teamId });
  };

  return (
    <div className="space-y-4">
      <div className="flex items-center justify-between gap-4">
        <div className="relative flex-1 max-w-sm">
          <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
          <Input
            placeholder="Search members..."
            value={query}
            onChange={(e) => setQuery(e.target.value)}
            className="pl-9"
          />
        </div>

        <div className="flex items-center gap-4">
          <span className="text-sm text-muted-foreground">
            {members.length}/{memberLimit} members
          </span>

          {canInvite(currentUserRole) && (
            <Button onClick={() => setInviteDialogOpen(true)} size="sm">
              <UserPlus className="mr-2 h-4 w-4" />
              Invite
            </Button>
          )}
        </div>
      </div>

      <div className="space-y-2">
        {results.length === 0 ? (
          <div className="text-center py-8 text-muted-foreground">
            {query ? "No members match your search" : "No members yet"}
          </div>
        ) : (
          results.map((member) => (
            <TeamMemberRow
              key={member.userId}
              member={member}
              currentUserRole={currentUserRole}
              currentUserId={currentUserId}
              onRemove={handleRemoveClick}
              onChangeRole={handleChangeRole}
              onLeave={handleLeave}
              highlightMatch={highlightMatch}
            />
          ))
        )}
      </div>

      <InviteMemberDialog
        open={inviteDialogOpen}
        onOpenChange={setInviteDialogOpen}
        onInvite={handleInvite}
        teamName={teamName}
        isInviting={inviteMutation.isPending}
      />

      <RemoveMemberDialog
        open={removeDialogOpen}
        onOpenChange={setRemoveDialogOpen}
        onConfirm={handleRemoveConfirm}
        memberName={memberToRemove?.user.name ?? ""}
        isRemoving={removeMutation.isPending}
      />
    </div>
  );
}
```

**team-invites-list.tsx:**
```typescript
"use client";

import { formatDistanceToNow } from "date-fns";
import { Clock, MoreHorizontal, RefreshCw, Trash2, Copy, Check } from "lucide-react";
import { useState } from "react";

import { Button } from "@sidekiq/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@sidekiq/components/ui/dropdown-menu";
import { api } from "@sidekiq/trpc/react";
import { toast } from "sonner";

interface PendingInvite {
  id: string;
  email: string;
  expiresAt: Date;
  createdAt: Date;
}

interface TeamInvitesListProps {
  teamId: string;
  invites: PendingInvite[];
}

/**
 * List of pending team invites with revoke and resend actions.
 */
export function TeamInvitesList({ teamId, invites }: TeamInvitesListProps) {
  const [copiedId, setCopiedId] = useState<string | null>(null);
  const utils = api.useUtils();

  const revokeMutation = api.team.revokeInvite.useMutation({
    onSuccess: () => {
      utils.team.listInvites.invalidate({ id: teamId });
      toast.success("Invite revoked");
    },
    onError: (error) => {
      toast.error(error.message);
    },
  });

  const resendMutation = api.team.resendInvite.useMutation({
    onSuccess: (data) => {
      toast.success("Invite resent");
      // Copy new URL to clipboard
      navigator.clipboard.writeText(data.inviteUrl);
    },
    onError: (error) => {
      toast.error(error.message);
    },
  });

  if (invites.length === 0) {
    return null;
  }

  return (
    <div className="space-y-4">
      <h3 className="text-sm font-medium text-muted-foreground">
        Pending Invites ({invites.length})
      </h3>

      <div className="space-y-2">
        {invites.map((invite) => (
          <div
            key={invite.id}
            className="flex items-center justify-between gap-4 rounded-lg border border-dashed p-3"
          >
            <div className="min-w-0">
              <p className="font-medium truncate">{invite.email}</p>
              <div className="flex items-center gap-1 text-xs text-muted-foreground">
                <Clock className="h-3 w-3" />
                <span>
                  Expires {formatDistanceToNow(new Date(invite.expiresAt), { addSuffix: true })}
                </span>
              </div>
            </div>

            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="ghost" size="icon" className="h-8 w-8 shrink-0">
                  <MoreHorizontal className="h-4 w-4" />
                  <span className="sr-only">Invite actions</span>
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                <DropdownMenuItem
                  onClick={() => {
                    resendMutation.mutate({ inviteId: invite.id });
                  }}
                  disabled={resendMutation.isPending}
                >
                  <RefreshCw className="mr-2 h-4 w-4" />
                  Resend Invite
                </DropdownMenuItem>
                <DropdownMenuItem
                  onClick={() => {
                    revokeMutation.mutate({ inviteId: invite.id });
                  }}
                  disabled={revokeMutation.isPending}
                  className="text-destructive focus:text-destructive"
                >
                  <Trash2 className="mr-2 h-4 w-4" />
                  Revoke Invite
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </div>
        ))}
      </div>
    </div>
  );
}
```
  </action>
  <verify>Run `pnpm typecheck` to verify both components compile</verify>
  <done>
- Member list shows search, member count, invite button
- Member list integrates with member search hook
- Invites list shows pending invites with actions
- All mutations properly invalidate queries
  </done>
</task>

<task type="auto">
  <name>Task 3: Create team settings section component</name>
  <files>sidekiq-webapp/src/components/team/team-settings-section.tsx</files>
  <action>
Create the main team settings section that will be embedded in the settings page:

```typescript
"use client";

import { useState } from "react";
import { useRouter } from "next/navigation";
import { Settings, Trash2, Users, ArrowRightLeft } from "lucide-react";

import { Button } from "@sidekiq/components/ui/button";
import { Input } from "@sidekiq/components/ui/input";
import { Label } from "@sidekiq/components/ui/label";
import { Separator } from "@sidekiq/components/ui/separator";
import { TeamAvatar } from "@sidekiq/components/team/team-avatar";
import { TeamMemberList } from "@sidekiq/components/team/team-member-list";
import { TeamInvitesList } from "@sidekiq/components/team/team-invites-list";
import { DeleteTeamDialog } from "@sidekiq/components/team/delete-team-dialog";
import { AvatarPicker } from "@sidekiq/components/sidekiq/avatar-picker";
import { api } from "@sidekiq/trpc/react";
import { toast } from "sonner";
import type { SidekiqAvatar } from "@sidekiq/server/db/schema";
import { canDeleteTeam, canTransferOwnership, type TeamRole } from "@sidekiq/lib/team-permissions";

interface TeamSettingsSectionProps {
  teamId: string;
  currentUserId: string;
}

/**
 * Complete team settings section for the settings page.
 * Includes team info, members, invites, and danger zone.
 *
 * Per CONTEXT.md: Team settings inside user settings page.
 */
export function TeamSettingsSection({ teamId, currentUserId }: TeamSettingsSectionProps) {
  const router = useRouter();
  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
  const [editingName, setEditingName] = useState(false);
  const [editingAvatar, setEditingAvatar] = useState(false);
  const [nameValue, setNameValue] = useState("");

  const utils = api.useUtils();

  // Queries
  const { data: team, isLoading: teamLoading } = api.team.getById.useQuery(
    { id: teamId },
    { enabled: !!teamId }
  );

  const { data: members = [] } = api.team.listMembers.useQuery(
    { id: teamId },
    { enabled: !!teamId }
  );

  const { data: invites = [] } = api.team.listInvites.useQuery(
    { id: teamId },
    { enabled: !!teamId && (team?.userRole === "owner" || team?.userRole === "admin") }
  );

  // Mutations
  const updateMutation = api.team.update.useMutation({
    onSuccess: () => {
      utils.team.getById.invalidate({ id: teamId });
      utils.team.list.invalidate();
      toast.success("Team updated");
      setEditingName(false);
      setEditingAvatar(false);
    },
    onError: (error) => {
      toast.error(error.message);
    },
  });

  const deleteMutation = api.team.delete.useMutation({
    onSuccess: () => {
      utils.team.list.invalidate();
      toast.success("Team deleted");
      setDeleteDialogOpen(false);
      router.push("/chat");
    },
    onError: (error) => {
      toast.error(error.message);
    },
  });

  if (teamLoading || !team) {
    return (
      <div className="flex items-center justify-center py-8">
        <div className="text-muted-foreground">Loading team...</div>
      </div>
    );
  }

  const userRole = team.userRole as TeamRole;

  const handleSaveName = () => {
    if (nameValue.trim() && nameValue !== team.name) {
      updateMutation.mutate({ id: teamId, name: nameValue.trim() });
    } else {
      setEditingName(false);
    }
  };

  const handleSaveAvatar = (avatar: SidekiqAvatar) => {
    updateMutation.mutate({ id: teamId, avatar });
  };

  const handleDelete = () => {
    deleteMutation.mutate({ id: teamId });
  };

  const handleLeft = () => {
    router.push("/chat");
  };

  return (
    <div className="space-y-8">
      {/* Team Info Section */}
      <div className="space-y-4">
        <div className="flex items-center gap-2">
          <Settings className="h-5 w-5" />
          <h2 className="text-lg font-semibold">Team Settings</h2>
        </div>

        <div className="flex items-start gap-6">
          {/* Avatar */}
          <div className="space-y-2">
            <Label>Avatar</Label>
            {editingAvatar ? (
              <AvatarPicker
                value={team.avatar as SidekiqAvatar}
                onChange={handleSaveAvatar}
                name={team.name}
              />
            ) : (
              <button
                onClick={() => setEditingAvatar(true)}
                className="group relative"
                disabled={userRole !== "owner" && userRole !== "admin"}
              >
                <TeamAvatar avatar={team.avatar as SidekiqAvatar} name={team.name} size="xl" />
                {(userRole === "owner" || userRole === "admin") && (
                  <div className="absolute inset-0 flex items-center justify-center rounded-lg bg-black/50 opacity-0 transition-opacity group-hover:opacity-100">
                    <span className="text-xs text-white">Edit</span>
                  </div>
                )}
              </button>
            )}
          </div>

          {/* Name */}
          <div className="flex-1 space-y-2">
            <Label htmlFor="team-name">Team Name</Label>
            {editingName ? (
              <div className="flex gap-2">
                <Input
                  id="team-name"
                  value={nameValue}
                  onChange={(e) => setNameValue(e.target.value)}
                  placeholder="Team name"
                  maxLength={100}
                  autoFocus
                />
                <Button onClick={handleSaveName} disabled={updateMutation.isPending}>
                  Save
                </Button>
                <Button
                  variant="ghost"
                  onClick={() => setEditingName(false)}
                  disabled={updateMutation.isPending}
                >
                  Cancel
                </Button>
              </div>
            ) : (
              <div className="flex items-center gap-2">
                <span className="text-lg">{team.name}</span>
                {(userRole === "owner" || userRole === "admin") && (
                  <Button
                    variant="ghost"
                    size="sm"
                    onClick={() => {
                      setNameValue(team.name);
                      setEditingName(true);
                    }}
                  >
                    Edit
                  </Button>
                )}
              </div>
            )}
          </div>
        </div>
      </div>

      <Separator />

      {/* Members Section */}
      <div className="space-y-4">
        <div className="flex items-center gap-2">
          <Users className="h-5 w-5" />
          <h2 className="text-lg font-semibold">Members</h2>
        </div>

        <TeamMemberList
          teamId={teamId}
          teamName={team.name}
          members={members}
          memberLimit={team.memberLimit}
          currentUserRole={userRole}
          currentUserId={currentUserId}
          onLeft={handleLeft}
        />

        {(userRole === "owner" || userRole === "admin") && invites.length > 0 && (
          <>
            <Separator className="my-6" />
            <TeamInvitesList teamId={teamId} invites={invites} />
          </>
        )}
      </div>

      {/* Danger Zone */}
      {canDeleteTeam(userRole) && (
        <>
          <Separator />

          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-destructive">Danger Zone</h2>

            <div className="rounded-lg border border-destructive/50 p-4">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="font-medium">Delete Team</h3>
                  <p className="text-sm text-muted-foreground">
                    Permanently delete this team and all associated data.
                  </p>
                </div>
                <Button
                  variant="destructive"
                  onClick={() => setDeleteDialogOpen(true)}
                >
                  <Trash2 className="mr-2 h-4 w-4" />
                  Delete Team
                </Button>
              </div>
            </div>
          </div>

          <DeleteTeamDialog
            open={deleteDialogOpen}
            onOpenChange={setDeleteDialogOpen}
            onConfirm={handleDelete}
            teamName={team.name}
            memberCount={team.memberCount}
            isDeleting={deleteMutation.isPending}
          />
        </>
      )}
    </div>
  );
}
```
  </action>
  <verify>Run `pnpm typecheck` to verify component compiles</verify>
  <done>
- Team settings section includes all management features
- Edit name and avatar inline
- Member list with search and actions
- Pending invites display
- Danger zone with delete confirmation
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `pnpm typecheck` passes
2. All team components export correctly
3. Member row shows correct role icons
4. Actions respect permission rules
5. Settings section integrates all sub-components
</verification>

<success_criteria>
- Member row displays avatar, name, role with correct icons
- Member list includes search and invite button
- Invites list shows pending invites with actions
- Team settings section provides complete management UI
- All actions properly integrated with tRPC mutations
</success_criteria>

<output>
After completion, create `.planning/phases/08-team-foundation/08-04-SUMMARY.md`
</output>
