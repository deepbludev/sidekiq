---
phase: 10-workspace-schema-migration
plan: 04
type: execute
wave: 3
depends_on: ["10-03"]
files_modified:
  - sidekiq-webapp/src/features/workspace/components/workspace-avatar.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-create-dialog.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-empty-state.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-form.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-settings-section.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-invites-list.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-member-list.tsx
  - sidekiq-webapp/src/features/workspace/components/workspace-member-row.tsx
  - sidekiq-webapp/src/features/workspace/components/delete-workspace-dialog.tsx
  - sidekiq-webapp/src/features/workspace/components/invite-member-dialog.tsx
  - sidekiq-webapp/src/features/workspace/components/invite-accept-card.tsx
  - sidekiq-webapp/src/features/workspace/components/remove-member-dialog.tsx
  - sidekiq-webapp/src/features/workspace/components/sidebar-panel-workspaces.tsx
autonomous: true

must_haves:
  truths:
    - "All component files use 'workspace' naming (no 'team' in file names)"
    - "All components call api.workspace.* (not api.team.*)"
    - "All imported types use Workspace naming (WorkspaceRole, WorkspaceAvatar, etc.)"
    - "UI text says 'workspace' where it previously said 'team'"
  artifacts:
    - path: "sidekiq-webapp/src/features/workspace/components/workspace-avatar.tsx"
      provides: "WorkspaceAvatar component"
      exports: ["WorkspaceAvatar"]
    - path: "sidekiq-webapp/src/features/workspace/components/workspace-settings-section.tsx"
      provides: "WorkspaceSettingsSection component"
      exports: ["WorkspaceSettingsSection"]
    - path: "sidekiq-webapp/src/features/workspace/components/sidebar-panel-workspaces.tsx"
      provides: "Sidebar panel for workspaces"
      exports: ["SidebarPanelWorkspaces"]
  key_links:
    - from: "workspace components"
      to: "tRPC workspace router"
      via: "api.workspace.* calls"
      pattern: "api\\.workspace\\."
---

<objective>
Rename all 13 workspace component files from team to workspace naming and update their internal content.

Purpose: The UI layer must match the domain model rename. All components that reference "team" in their names, exported symbols, tRPC calls, and UI text must be updated to "workspace".

Output: 13 renamed component files with updated content.
</objective>

<execution_context>
@/Users/carlocasorzo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/carlocasorzo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-workspace-schema-migration/10-CONTEXT.md
@.planning/phases/10-workspace-schema-migration/10-03-SUMMARY.md
@sidekiq-webapp/src/features/workspace/components/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename and update team-prefixed component files to workspace</name>
  <files>
    sidekiq-webapp/src/features/workspace/components/workspace-avatar.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-create-dialog.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-empty-state.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-form.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-settings-section.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-invites-list.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-member-list.tsx
    sidekiq-webapp/src/features/workspace/components/workspace-member-row.tsx
  </files>
  <action>
  For each of the 8 team-prefixed component files, use `git mv` to rename and then update content:

  **File renames (use git mv):**
  ```
  git mv team-avatar.tsx workspace-avatar.tsx
  git mv team-create-dialog.tsx workspace-create-dialog.tsx
  git mv team-empty-state.tsx workspace-empty-state.tsx
  git mv team-form.tsx workspace-form.tsx
  git mv team-settings-section.tsx workspace-settings-section.tsx
  git mv team-invites-list.tsx workspace-invites-list.tsx
  git mv team-member-list.tsx workspace-member-list.tsx
  git mv team-member-row.tsx workspace-member-row.tsx
  ```

  **For EACH renamed file, apply these content changes:**

  1. **Component names:** `TeamAvatar` -> `WorkspaceAvatar`, `TeamCreateDialog` -> `WorkspaceCreateDialog`, etc.
  2. **Exported function names:** Match the component name changes
  3. **Import paths within workspace feature:** Use relative imports (`./workspace-avatar` not `./team-avatar`). If files import from sibling components, update those paths too.
  4. **Imports from workspace feature modules:**
     - `@sidekiq/workspace/validations` imports: all schema names updated per Plan 03 (createWorkspaceSchema, etc.)
     - `@sidekiq/workspace/lib/permissions` imports: `TeamRole` -> `WorkspaceRole`, function names updated per Plan 03
     - `@sidekiq/workspace/api/emails` -- not imported by components (server-only)
  5. **tRPC calls:** Every `api.team.*` -> `api.workspace.*`:
     - `api.team.list` -> `api.workspace.list`
     - `api.team.create` -> `api.workspace.create`
     - `api.team.update` -> `api.workspace.update`
     - `api.team.delete` -> `api.workspace.delete`
     - `api.team.getById` -> `api.workspace.getById`
     - `api.team.listMembers` -> `api.workspace.listMembers`
     - `api.team.listInvites` -> `api.workspace.listInvites`
     - `api.team.invite` -> `api.workspace.invite`
     - `api.team.acceptInvite` -> `api.workspace.acceptInvite`
     - `api.team.revokeInvite` -> `api.workspace.revokeInvite`
     - `api.team.resendInvite` -> `api.workspace.resendInvite`
     - `api.team.removeMember` -> `api.workspace.removeMember`
     - `api.team.changeRole` -> `api.workspace.changeRole`
     - `api.team.transferOwnership` -> `api.workspace.transferOwnership`
     - `api.team.leave` -> `api.workspace.leave`
  6. **Mutation input fields:** `teamId` -> `workspaceId` in all mutation call arguments
  7. **Query invalidation:** `api.team.*` -> `api.workspace.*` in any `utils.team.*` cache invalidation calls (e.g., `utils.team.list.invalidate()` -> `utils.workspace.list.invalidate()`)
  8. **Type references:** `TeamAvatar` type -> `WorkspaceAvatar`, `TeamFormValues` -> `WorkspaceFormValues`, etc.
  9. **UI text strings:** "team" -> "workspace", "Team" -> "Workspace" in user-facing strings:
     - "Create Team" -> "Create Workspace"
     - "Team Name" -> "Workspace Name"
     - "Delete Team" -> "Delete Workspace"
     - "Team Settings" -> "Workspace Settings"
     - "No teams yet" -> "No workspaces yet"
     - etc.
  10. **localStorage keys (if any):** Should not be in components (handled in hooks)
  11. **JSDoc comments:** Update all team references to workspace
  12. **Props interfaces:** Rename any `Team*Props` -> `Workspace*Props`

  **IMPORTANT:** Read each file first before editing. Some components may have complex internal logic. The rename is mechanical but must be thorough -- every occurrence of "team"/"Team" in the file must become "workspace"/"Workspace", EXCEPT:
  - CSS class names that happen to use "team" (unlikely)
  - The workspace type enum value "team" (this is a valid value, not a naming issue)
  </action>
  <verify>
  For each renamed file:
  - `ls sidekiq-webapp/src/features/workspace/components/workspace-*.tsx` shows 8 files
  - `ls sidekiq-webapp/src/features/workspace/components/team-*.tsx` shows 0 files (all renamed)
  - `grep -r "api\.team\." sidekiq-webapp/src/features/workspace/components/` returns 0 matches
  - `grep -r "TeamAvatar\|TeamCreate\|TeamForm\|TeamEmpty\|TeamSettings\|TeamInvites\|TeamMember" sidekiq-webapp/src/features/workspace/components/` returns 0 matches (except possibly as import/export that's already renamed)
  </verify>
  <done>
  All 8 team-prefixed component files renamed to workspace-prefixed, with all internal content updated: component names, exports, imports, tRPC calls, mutation inputs, UI text, and JSDoc.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rename and update remaining component files and hooks</name>
  <files>
    sidekiq-webapp/src/features/workspace/components/delete-workspace-dialog.tsx
    sidekiq-webapp/src/features/workspace/components/invite-member-dialog.tsx
    sidekiq-webapp/src/features/workspace/components/invite-accept-card.tsx
    sidekiq-webapp/src/features/workspace/components/remove-member-dialog.tsx
    sidekiq-webapp/src/features/workspace/components/sidebar-panel-workspaces.tsx
    sidekiq-webapp/src/features/workspace/hooks/use-active-workspace.ts
    sidekiq-webapp/src/features/workspace/hooks/use-member-search.tsx
  </files>
  <action>
  **File renames (git mv):**
  ```
  git mv delete-team-dialog.tsx delete-workspace-dialog.tsx
  git mv sidebar-panel-teams.tsx sidebar-panel-workspaces.tsx
  git mv use-active-team.ts use-active-workspace.ts
  ```
  Note: `invite-member-dialog.tsx`, `invite-accept-card.tsx`, and `remove-member-dialog.tsx` do NOT need file renames (they don't have "team" in the filename). But they need internal content updates.

  **For delete-workspace-dialog.tsx (renamed from delete-team-dialog.tsx):**
  - `DeleteTeamDialog` -> `DeleteWorkspaceDialog`
  - `api.team.delete` -> `api.workspace.delete`
  - `teamId` -> `workspaceId` in mutation input
  - UI text: "Delete Team" -> "Delete Workspace"
  - All imports updated

  **For sidebar-panel-workspaces.tsx (renamed from sidebar-panel-teams.tsx):**
  - `SidebarPanelTeams` -> `SidebarPanelWorkspaces`
  - All tRPC calls: `api.team.*` -> `api.workspace.*`
  - All team references -> workspace
  - Import updates for renamed components (WorkspaceAvatar, WorkspaceCreateDialog, etc.)
  - UI text: "Teams" -> "Workspaces"

  **For invite-member-dialog.tsx (content update only):**
  - `api.team.invite` -> `api.workspace.invite`
  - `teamId` -> `workspaceId` in props and mutation input
  - Any `TeamRole` -> `WorkspaceRole`
  - UI text: "team" -> "workspace"
  - Import updates

  **For invite-accept-card.tsx (content update only):**
  - `api.team.acceptInvite` -> `api.workspace.acceptInvite`
  - `api.team.getInviteByToken` -> `api.workspace.getInviteByToken`
  - `teamName` / `teamAvatar` in response data -> `workspaceName` / `workspaceAvatar` (check what the router returns -- per Plan 03, the router returns `invite.workspace.name` and `invite.workspace.avatar`)
  - UI text: "join team" -> "join workspace"
  - Import updates

  **For remove-member-dialog.tsx (content update only):**
  - `api.team.removeMember` -> `api.workspace.removeMember`
  - `teamId` -> `workspaceId` in props and mutation input
  - UI text: "team" -> "workspace"
  - Import updates

  **For use-active-workspace.ts (renamed from use-active-team.ts):**
  - `useActiveTeam` -> `useActiveWorkspace`
  - `ACTIVE_TEAM_KEY` -> `ACTIVE_WORKSPACE_KEY`, value: `"sidekiq-active-workspace-id"` (NEW localStorage key -- clean break per CONTEXT.md)
  - `UseActiveTeamResult` -> `UseActiveWorkspaceResult`
  - `activeTeamId` -> `activeWorkspaceId`
  - `setActiveTeamId` -> `setActiveWorkspaceId`
  - `activeTeam` -> `activeWorkspace`
  - `teams` -> `workspaces`
  - `api.team.list.useQuery()` -> `api.workspace.list.useQuery()`
  - All JSDoc: "team" -> "workspace"

  **For use-member-search.tsx (content update only):**
  - `TeamMember` type -> `WorkspaceMember`
  - Any `teamId` -> `workspaceId`
  - Any `api.team.*` -> `api.workspace.*`
  - JSDoc updates
  </action>
  <verify>
  - `ls sidekiq-webapp/src/features/workspace/components/delete-team-dialog.tsx` -> file not found (renamed)
  - `ls sidekiq-webapp/src/features/workspace/components/sidebar-panel-teams.tsx` -> file not found (renamed)
  - `ls sidekiq-webapp/src/features/workspace/hooks/use-active-team.ts` -> file not found (renamed)
  - `grep -r "api\.team\." sidekiq-webapp/src/features/workspace/` returns 0 matches
  - `grep -r "useActiveTeam" sidekiq-webapp/src/features/workspace/` returns 0 matches
  - `grep -r "TeamMember" sidekiq-webapp/src/features/workspace/hooks/` returns 0 matches
  - `grep "ACTIVE_WORKSPACE_KEY" sidekiq-webapp/src/features/workspace/hooks/use-active-workspace.ts` matches
  </verify>
  <done>
  All 5 remaining component files and 2 hook files updated with workspace naming. No "team" references remain in the workspace feature directory (except the workspace type enum value "team").
  </done>
</task>

</tasks>

<verification>
- No files named team-*.tsx in workspace/components/
- No file named use-active-team.ts in workspace/hooks/
- No api.team.* calls anywhere in workspace feature
- All component exports use Workspace naming
</verification>

<success_criteria>
Every component and hook in the workspace feature uses workspace naming. File names, component names, tRPC calls, mutation inputs, UI text, and type references are all updated.
</success_criteria>

<output>
After completion, create `.planning/phases/10-workspace-schema-migration/10-04-SUMMARY.md`
</output>
