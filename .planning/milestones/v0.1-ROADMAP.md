# Milestone v0.1: Core Experience

**Status:** SHIPPED 2026-01-26
**Phases:** 1-8.2
**Total Plans:** 57

## Overview

Sidekiq v1 builds upon existing authentication and database infrastructure to deliver a premium AI chat experience with custom assistants (Sidekiqs) and team collaboration. The roadmap progresses from core streaming infrastructure through chat UI, thread management, Sidekiq features, and team sharing, with UI polish and error handling integrated throughout rather than deferred to the end. This brownfield project leverages Next.js 15, tRPC 11, and Vercel AI SDK to deliver model-agnostic AI conversations with a Linear-inspired aesthetic.

## Phases

### Phase 1: AI Streaming Infrastructure
**Goal**: User can send a message and receive a streaming AI response using Vercel AI SDK
**Depends on**: Nothing (brownfield - auth and schema exist)
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md — AI SDK backend infrastructure (packages, model registry, /api/chat route handler)
- [x] 01-02-PLAN.md — Chat UI with streaming (useChat, message components, typing indicator, auto-scroll)

### Phase 2: Basic Chat Interface
**Goal**: User can send and view messages with optimistic UI and proper error handling
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:
- [x] 02-01-PLAN.md — Theme system + glassmorphism foundation (next-themes, glass utilities, toggle-group)
- [x] 02-02-PLAN.md — Markdown rendering + message actions (Streamdown, copy/edit/regenerate, scroll-to-bottom)
- [x] 02-03-PLAN.md — Empty state + final integration (categorized prompts, error toasts, header with toggle)

### Phase 3: Thread Management
**Goal**: User can organize conversations with create, delete, archive, pin, and rename
**Depends on**: Phase 2
**Plans**: 5 plans

Plans:
- [x] 03-01-PLAN.md — Thread tRPC router + routing structure (/chat, /chat/[threadId])
- [x] 03-02-PLAN.md — Thread creation on first message + auto-title generation
- [x] 03-03-PLAN.md — Thread action UI components (context menu, delete dialog, hover actions)
- [x] 03-04-PLAN.md — [gap closure] Stream abortion fix (history API for URL update)
- [x] 03-05-PLAN.md — [gap closure] Browser tab title display (SSR + dynamic update)

### Phase 4: Model Selection & Persistence
**Goal**: User can select which LLM model to use and selection persists per thread
**Depends on**: Phase 3
**Plans**: 4 plans

Plans:
- [x] 04-01-PLAN.md — Schema extensions + model metadata (user preferences JSONB, extended ModelConfig, shadcn components)
- [x] 04-02-PLAN.md — Model picker component (fuzzy search, favorites, provider groups, hover cards)
- [x] 04-03-PLAN.md — Chat integration + persistence (wire picker, user preferences tRPC, model switch hints)
- [x] 04-04-PLAN.md — [gap closure] Fix model picker dropdown not opening (forward rest props)

### Phase 5: Sidebar & Navigation
**Goal**: User can browse conversation history with search, date grouping, and visual indicators
**Depends on**: Phase 4
**Plans**: 5 plans

Plans:
- [x] 05-01-PLAN.md — Foundation (deps, sidebar state hook, keyboard shortcuts, date grouping)
- [x] 05-02-PLAN.md — Sidebar layout (header, collapsed icon rail, layout integration)
- [x] 05-03-PLAN.md — Thread list with virtualization and date groups
- [x] 05-04-PLAN.md — Thread search with fuzzy matching
- [x] 05-05-PLAN.md — Mobile drawer and footer with user menu

### Phase 6: Sidekiq CRUD
**Goal**: User can create, edit, and delete custom AI assistants (Sidekiqs)
**Depends on**: Phase 5
**Plans**: 7 plans

Plans:
- [x] 06-01-PLAN.md — Schema extensions + tRPC router (CRUD with rate limiting)
- [x] 06-02-PLAN.md — Dependencies + utilities (avatar, hooks, view preference)
- [x] 06-03-PLAN.md — List page + empty state + sidebar section
- [x] 06-04-PLAN.md — Create form with split layout and live preview
- [x] 06-05-PLAN.md — Conversation starters (drag-drop) + instructions editor (markdown)
- [x] 06-06-PLAN.md — Avatar customization (color picker + emoji picker)
- [x] 06-07-PLAN.md — Edit page + templates + final verification

### Phase 7: Sidekiq Chat Integration
**Goal**: User can start a chat with a Sidekiq and see its personality in responses
**Depends on**: Phase 6
**Plans**: 10 plans

Plans:
- [x] 07-01-PLAN.md — Backend foundation: sidekiqId in chat schema, system message injection, thread list relation
- [x] 07-02-PLAN.md — Chat page Sidekiq integration: URL param handling, empty state with conversation starters
- [x] 07-03-PLAN.md — Active Sidekiq UI indicators: SidekiqIndicator component, chat header, input area badge
- [x] 07-04-PLAN.md — Sidebar visual indicators: thread item Sidekiq avatar and subtitle, deleted Sidekiq handling
- [x] 07-05-PLAN.md — Chat entry points: sidebar click, list page actions, edit page button
- [x] 07-06-PLAN.md — Final integration: SidekiqPicker dialog, Cmd+Shift+S shortcut, AI message avatar, thread resume
- [x] 07-07-PLAN.md — [gap closure] Deleted Sidekiq handling: preserve name in threads before delete
- [x] 07-08-PLAN.md — [gap closure] Model selector in Sidekiq form: add ModelPicker to create/edit
- [x] 07-09-PLAN.md — [gap closure] Model state fix: reset model picker on Sidekiq switch
- [x] 07-10-PLAN.md — [gap closure] Force ChatInterface remount on Sidekiq switch via key prop

### Phase 8: Team Foundation
**Goal**: User can create teams and manage members with invite system
**Depends on**: Phase 7
**Plans**: 8 plans

Plans:
- [x] 08-01-PLAN.md — Schema extension: admin role, team avatar, memberLimit, validation schemas, permission helpers
- [x] 08-02-PLAN.md — Team tRPC router: CRUD, member management, invite system, ownership transfer
- [x] 08-03-PLAN.md — Team UI components: TeamAvatar, dialogs (delete, remove, invite), member search hook
- [x] 08-04-PLAN.md — Team settings UI: member list, invites list, team settings section
- [x] 08-05-PLAN.md — Invite acceptance page: public page at /invite/[token] with auth flow
- [x] 08-06-PLAN.md — Team creation flow: form, create dialog, empty state, settings page integration
- [x] 08-07-PLAN.md — Sidebar integration: team dropdown, teams section, active team persistence
- [x] 08-08-PLAN.md — [gap closure] Database migration sync: add admin role, avatar, memberLimit columns

### Phase 8.1: Rethink Branding and UI to Match Linear Aesthetic (INSERTED)
**Goal**: Overhaul the design system and UI to match Linear.app's minimalist, professional, polished aesthetic
**Depends on**: Phase 8
**Plans**: 8 plans

Plans:
- [x] 08.1-01-PLAN.md — Design system foundation (globals.css tokens, font swap, glass removal)
- [x] 08.1-02-PLAN.md — UI primitives (16 shadcn components: card, dialog, button, input, etc.)
- [x] 08.1-03-PLAN.md — Auth components + page layouts (hardcoded zinc removal, brand name)
- [x] 08.1-04-PLAN.md — Chat components (editor-like input, header bar, message styling)
- [x] 08.1-05-PLAN.md — Sidebar + thread components (active state, brand, section styling)
- [x] 08.1-06-PLAN.md — Sidekiq + model picker components (cards, pickers, forms)
- [x] 08.1-07-PLAN.md — Team components (settings, dialogs, member rows)
- [x] 08.1-08-PLAN.md — Brand icon + final sweep + visual verification checkpoint

### Phase 8.2: Two-Tier Sidebar Navigation Architecture (INSERTED)
**Goal**: Refactor sidebar into a two-tier navigation structure with primary icon rail and contextual secondary panels
**Depends on**: Phase 8.1
**Plans**: 5 plans

Plans:
- [x] 08.2-01-PLAN.md — Core structure: icon rail, panel container, sidebar layout composition
- [x] 08.2-02-PLAN.md — Panel content: chats panel, sidekiqs panel, teams panel migration
- [x] 08.2-03-PLAN.md — Layout integration: dashboard-wide sidebar, keyboard shortcuts, panel collapsibility
- [x] 08.2-04-PLAN.md — Mobile: bottom tab bar and full-screen overlay panels
- [x] 08.2-05-PLAN.md — Cleanup: remove old sidebar files, update exports, visual verification

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. AI Streaming Infrastructure | 2/2 | Complete | 2026-01-22 |
| 2. Basic Chat Interface | 3/3 | Complete | 2026-01-23 |
| 3. Thread Management | 5/5 | Complete | 2026-01-23 |
| 4. Model Selection & Persistence | 4/4 | Complete | 2026-01-23 |
| 5. Sidebar & Navigation | 5/5 | Complete | 2026-01-24 |
| 6. Sidekiq CRUD | 7/7 | Complete | 2026-01-24 |
| 7. Sidekiq Chat Integration | 10/10 | Complete | 2026-01-25 |
| 8. Team Foundation | 8/8 | Complete | 2026-01-25 |
| 8.1. Rethink Branding/UI (INSERTED) | 8/8 | Complete | 2026-01-26 |
| 8.2. Two-Tier Sidebar Navigation (INSERTED) | 5/5 | Complete | 2026-01-26 |

---

## Milestone Summary

**Decimal Phases:**
- Phase 8.1: Rethink Branding and UI (inserted after Phase 8 for design system overhaul)
- Phase 8.2: Two-Tier Sidebar Navigation (inserted after Phase 8.1 for architectural improvement)

**Key Decisions:**
- Vercel AI Gateway for unified LLM access (single API key)
- SSE for streaming (not WebSockets) — simpler, AI SDK native
- Runtime system message injection for Sidekiqs (not stored in DB)
- Thread routing: /chat for new, /chat/[threadId] for existing
- Model selection priority: thread > sidekiq > user > default
- oklch hue 260 (blue-indigo) color palette with Inter font
- Two-tier sidebar: 48px icon rail + 288px contextual panel
- Route-based panel switching via usePathname()

**Issues Resolved:**
- Stream abortion during URL update (window.history.replaceState)
- Model picker dropdown not opening (Radix asChild prop forwarding)
- Deleted Sidekiq graceful degradation (deletedSidekiqName column)
- ChatInterface remount on Sidekiq switch (React key prop)
- Database migration sync for team schema extensions

**Issues Deferred:**
- KIQQ-07: 100 Sidekiqs per user limit (deferred to subscription system)
- Team Sidekiq sharing (TEAM-07-10, planned for next milestone)
- Error handling polish (ERRR-01-04, planned for next milestone)
- UI animations and loading states (UIUX-04-08, 10-11, planned for next milestone)

**Technical Debt Incurred:**
- Edit/regenerate message actions show "coming soon" toast placeholders
- Rate limit mismatch: REQUIREMENTS says 10/hour, code implements 25/hour
- 2 unused imports generating ESLint warnings
- 3 stale/empty phase directories in .planning/phases/

---

_For current project status, see .planning/ROADMAP.md (created for next milestone)_
